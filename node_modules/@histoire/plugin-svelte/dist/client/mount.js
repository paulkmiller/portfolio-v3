import{defineComponent as m,ref as f,watch as l,onMounted as y,onUnmounted as c,h as p}from"@histoire/vendors/vue";import{components as d}from"@histoire/controls";import*as r from"virtual:$histoire-setup";import*as i from"virtual:$histoire-generated-global-setup";import v from"./MountStory.svelte.js";import S from"./MountVariant.svelte.js";import w from"./Stub.svelte.js";const x=m({name:"MountStory",props:{story:{type:Object,required:!0}},setup(t){const n=f();let e,o;async function u(){o=document.createElement("div"),n.value.appendChild(o),e=new t.story.file.component({target:o,props:{Hst:{Story:v,Variant:S,...h()}},context:new Map(Object.entries({__hstStory:t.story}))}),typeof(i==null?void 0:i.setupSvelte3)=="function"&&await i.setupSvelte3({app:e,story:t.story,variant:null}),typeof(r==null?void 0:r.setupSvelte3)=="function"&&await r.setupSvelte3({app:e,story:t.story,variant:null})}function s(){var a;e==null||e.$destroy(),o&&((a=o.parentNode)==null||a.removeChild(o),o=null)}return l(()=>t.story.id,async()=>{s(),await u()}),y(async()=>{await u()}),c(()=>{s()}),{el:n}},render(){return p("div",{ref:"el"})}});function h(){const t={};for(const n in d)t[n.substring(3)]=w;return t}export{x as default};
